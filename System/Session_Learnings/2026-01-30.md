# Session Learnings - 2026-01-30

Automatically captured from Claude Code sessions.

---

## [14:30] - Granola MCP Upgraded to API-First Architecture

**What happened:** User received feedback from beta tester (Jake) that older Granola meetings showed "no content available". Investigation revealed cache-based approach had incomplete historical data. Found blog post by Joseph Thacker reverse-engineering Granola's unofficial API.

**Why it matters:** 
- Cache-only approach: Lower success rate for historical meetings
- API approach: 91% success rate across all meetings
- User experience: No "content unavailable" errors for meetings they actually attended
- Solves real user pain point without requiring any setup

**Implementation:**
1. Added API client with auth token reading from `supabase.json`
2. Implemented API-first with cache fallback architecture
3. Added response caching (5 min TTL) to avoid rate limits
4. Exponential backoff retry logic for transient failures
5. Graceful degradation - silently falls back, user never sees errors
6. Handles rate limits (429) and auth failures (401) automatically

**Results:**
- Testing showed API provides 9x more meetings with content vs cache alone
- All tools now return `source: api` or `source: cache` in metadata
- Zero breaking changes to tool interfaces
- Upgraded from v1.0 to v2.0

**Documentation updated:**
- `CHANGELOG.md` - Major upgrade entry
- `Dex_Technical_Guide.md` - Architecture details and rationale
- Inline code comments explaining API-first strategy

**Status:** complete

---